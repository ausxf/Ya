<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>Kuiz Alpine Mobile 30%</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
</head>
<body class="bg-gray-100">
  <div x-data="quizApp()" class="w-full h-[30vh] bg-white p-3 flex flex-col justify-between rounded shadow mx-auto mt-4 max-w-md"
       x-init="init()">

    <!-- Progress Bar -->
    <div class="mb-1 bg-gray-200 h-2 rounded">
      <div class="bg-blue-500 h-2 rounded transition-all duration-300" 
           :style="`width: ${(currentIndex+1)/questions.length*100}%`"></div>
    </div>

    <!-- Soalan + Jawapan -->
    <template x-if="!quizCompleted">
      <div class="flex-1 flex flex-col justify-start overflow-hidden">
        <!-- Soalan -->
        <h2 class="text-sm font-semibold mb-2 leading-tight" x-text="questions[currentIndex].question"></h2>
        
        <!-- Jawapan -->
        <div class="space-y-1">
          <template x-for="(option, i) in questions[currentIndex].options" :key="i">
            <button 
              @click="selectAnswer(option)"
              class="w-full text-left px-2 py-1 text-xs border rounded hover:bg-gray-100 transition"
              :class="{
                'bg-green-200': selectedAnswer === option && option === questions[currentIndex].answer,
                'bg-red-200': selectedAnswer === option && option !== questions[currentIndex].answer
              }"
              x-text="option">
            </button>
          </template>
        </div>
      </div>
    </template>

    <!-- Butang Navigasi -->
    <template x-if="!quizCompleted">
      <div class="flex justify-between mt-2 gap-2">
        <button @click="prevQuestion" 
                class="flex-1 px-2 py-1 bg-gray-400 text-white rounded text-xs"
                :disabled="currentIndex === 0">◀</button>
        <button @click="nextQuestion" 
                class="flex-1 px-2 py-1 bg-blue-500 text-white rounded text-xs"
                :disabled="!answered">▶</button>
      </div>
    </template>

    <!-- Keputusan -->
    <template x-if="quizCompleted">
      <div class="flex flex-col justify-center items-center flex-1 text-center">
        <h2 class="text-lg font-bold mb-2">Selesai!</h2>
        <p class="text-sm">Skor: <span x-text="score"></span>/<span x-text="questions.length"></span></p>
      </div>
    </template>
  </div>

  <script>
    function quizApp() {
      return {
        questions: [
          { question: "Berapa Umur Yara Fatima?", options: ["2 Tahun", "11 Bulan", "10 Bulan"], answer: "10 Bulan" },
          { question: "Boyen lahir di mana?", options: ["Klang", "Selama", "Puncak Alam"], answer: "Selama" },
          { question: "Apa panggilan Boyen bila dia nak makan?", options: ["Snippy de leo", "Snippy Untuk Leo", "Snippyyy"], answer: "Snippy Untuk Leo" },
          { question: "Yara Fatima tak minat apa", options: ["Makan", "Main Card", "Pakai Baju"], answer: "Pakai Baju" }
        ],
        currentIndex: 0,
        selectedAnswer: null,
        answered: false,
        score: 0,
        quizCompleted: false,

        init() { this.reset(); },
        reset() {
          this.currentIndex = 0;
          this.selectedAnswer = null;
          this.answered = false;
          this.score = 0;
          this.quizCompleted = false;
        },
        selectAnswer(option) {
          if (!this.answered) {
            this.selectedAnswer = option;
            this.answered = true;
            if (option === this.questions[this.currentIndex].answer) {
              this.score++;
            }
          }
        },
        nextQuestion() {
          if (this.currentIndex < this.questions.length - 1) {
            this.currentIndex++;
            this.selectedAnswer = null;
            this.answered = false;
          } else {
            this.quizCompleted = true;
          }
        },
        prevQuestion() {
          if (this.currentIndex > 0) {
            this.currentIndex--;
            this.selectedAnswer = null;
            this.answered = false;
          }
        }
      };
    }
  </script>
</body>
</html>
