<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kuiz Alpine Upgrade</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs" defer></script>
</head>
<body class="bg-gray-100">

<div class="p-4 md:p-6">
  <div x-data="quizApp()" x-init="init()" class="max-w-lg w-full mx-auto bg-white rounded-lg shadow-lg p-6 md:p-8">
    
    <!-- Progress Bar -->
    <div class="mb-6 bg-gray-200 h-3 rounded">
      <div class="bg-blue-500 h-3 rounded transition-all duration-300" 
           :style="`width: ${(currentIndex+1)/questions.length*100}%`"></div>
    </div>

    <!-- Soalan -->
    <template x-if="!quizCompleted">
      <div>
        <h2 class="text-2xl font-bold mb-6 leading-snug text-gray-800" 
            x-text="questions[currentIndex].question"></h2>
        
        <!-- Pilihan Jawapan -->
        <div class="space-y-3">
          <template x-for="(option, i) in questions[currentIndex].options" :key="i">
            <button 
              @click="selectAnswer(option)"
              class="block w-full text-left px-4 py-3 rounded-lg border text-lg font-medium transition"
              :class="{
                'bg-blue-500 text-white border-blue-500': selectedAnswer === option,
                'bg-gray-100 hover:bg-gray-200': selectedAnswer !== option
              }"
              x-text="option">
            </button>
          </template>
        </div>

        <!-- Butang Navigasi -->
        <div class="flex justify-between mt-6 space-x-4">
          <button @click="prevQuestion" 
                  class="flex-1 px-4 py-3 bg-gray-400 text-white rounded-lg text-lg font-semibold disabled:opacity-50"
                  :disabled="currentIndex === 0">Kembali</button>
          <button @click="nextQuestion" 
                  class="flex-1 px-4 py-3 bg-blue-500 text-white rounded-lg text-lg font-semibold disabled:opacity-50"
                  :disabled="!answered">Seterusnya</button>
        </div>
      </div>
    </template>

    <!-- Hasil -->
    <template x-if="quizCompleted">
      <div class="text-center py-10">
        <h2 class="text-3xl font-extrabold mb-4 text-gray-800">Kuiz Selesai!</h2>
        <p class="text-xl mb-6">Skor anda: <span class="font-bold text-blue-500" x-text="score"></span> / <span x-text="questions.length"></span></p>
        <button @click="reset()" class="px-6 py-3 bg-green-500 text-white rounded-lg text-lg font-semibold">Main Semula</button>
      </div>
    </template>
  </div>
</div>

<script>
function quizApp() {
  return {
    questions: [
      { question: "Berapa Umur Yara Fatima?", options: ["2 Tahun", "11 Bulan", "10 Bulan"], answer: "10 Bulan" },
      { question: "Boyen lahir di mana?", options: ["Klang", "Selama", "Puncak Alam"], answer: "Selama" },
      { question: "Apa panggilan Boyen bila dia nak makan?", options: ["Snippy de leo", "Snippy Untuk Leo", "Snippyyy"], answer: "Snippy Untuk Leo" },
      { question: "Yara Fatima tak minat apa", options: ["Makan", "Main Card", "Pakai Baju"], answer: "Pakai Baju" }
    ],
    currentIndex: 0,
    selectedAnswer: null,
    answered: false,
    score: 0,
    quizCompleted: false,

    init() {
      this.reset();
    },
    reset() {
      this.currentIndex = 0;
      this.selectedAnswer = null;
      this.answered = false;
      this.score = 0;
      this.quizCompleted = false;
    },
    selectAnswer(option) {
      // Kurangkan markah jika jawapan lama betul
      if (this.selectedAnswer === this.questions[this.currentIndex].answer) {
        this.score--;
      }
      // Update jawapan terkini
      this.selectedAnswer = option;
      // Tambah markah jika jawapan baru betul
      if (option === this.questions[this.currentIndex].answer) {
        this.score++;
      }
      this.answered = true;
    },
    nextQuestion() {
      if (this.currentIndex < this.questions.length - 1) {
        this.currentIndex++;
        this.selectedAnswer = null;
        this.answered = false;
      } else {
        this.quizCompleted = true;
      }
    },
    prevQuestion() {
      if (this.currentIndex > 0) {
        this.currentIndex--;
        this.selectedAnswer = null;
        this.answered = false;
      }
    }
  };
}
</script>

</body>
</html>
